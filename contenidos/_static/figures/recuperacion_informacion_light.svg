<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 620">
  <rect width="800" height="620" fill="#f0f2f5"/>

  <defs>
    <marker id="arrowhead-light" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333333" />
    </marker>
  </defs>

  <style>
    .label { font-family: Arial; font-size: 14px; text-anchor: middle; dominant-baseline: middle; fill: #333333; }
    .label-small { font-family: Arial; font-size: 12px; text-anchor: middle; fill: #555555; }
    .title { font-family: Arial; font-size: 18px; text-anchor: middle; fill: #333333; font-weight: bold; }
    .edge { fill: none; stroke: #333333; stroke-width: 2; marker-end: url(#arrowhead-light); }
    .edge-dashed { fill: none; stroke: #333333; stroke-width: 2; stroke-dasharray: 5,5; marker-end: url(#arrowhead-light); }
    
    /* Grupos Contenedores Light */
    .group-box-blue { fill: #f0f8ff; stroke: #add8e6; stroke-width: 1; stroke-dasharray: 5,5; }
    .group-box-green { fill: #f0fff0; stroke: #90ee90; stroke-width: 1; stroke-dasharray: 5,5; }
    
    /* Nodos Pastel Light */
    .box-blue { fill: #e1f5ff; stroke: #4682b4; stroke-width: 2; }
    .box-green { fill: #e1ffe1; stroke: #2e8b57; stroke-width: 2; }
    .box-yellow { fill: #fff4e1; stroke: #f6ad55; stroke-width: 2; }
  </style>

  <text x="400" y="30" class="title">Diagrama de un Sistema de Recuperación de Información</text>

  <rect x="20" y="60" width="760" height="120" rx="10" class="group-box-blue" />
  <text x="400" y="80" class="label-small" font-weight="bold">Procesamiento de Documentos</text>

  <rect x="350" y="200" width="430" height="400" rx="10" class="group-box-green" />
  <text x="565" y="220" class="label-small" font-weight="bold">Procesamiento de Consultas</text>

  <g>
    <rect x="40" y="100" width="160" height="50" rx="5" class="box-blue" />
    <text x="120" y="125" class="label">Colección de Documentos</text>

    <rect x="240" y="100" width="160" height="50" rx="5" class="box-blue" />
    <text x="320" y="125" class="label">Preprocesamiento</text>

    <rect x="440" y="100" width="140" height="50" rx="5" class="box-blue" />
    <text x="510" y="125" class="label">Indexación</text>

    <rect x="620" y="100" width="140" height="50" rx="5" class="box-blue" />
    <text x="690" y="125" class="label">Índice</text>

    <rect x="80" y="350" width="140" height="50" rx="5" class="box-yellow" />
    <text x="150" y="375" class="label">Usuario</text>

    <rect x="30" y="480" width="120" height="50" rx="5" class="box-yellow" />
    <text x="90" y="505" class="label">Consulta</text>

    <rect x="170" y="480" width="120" height="50" rx="5" class="box-yellow" />
    <text x="230" y="505" class="label">Feedback</text>

    <rect x="400" y="250" width="180" height="50" rx="5" class="box-green" />
    <text x="490" y="275" class="label">Motor de Búsqueda</text>

    <rect x="400" y="350" width="180" height="50" rx="5" class="box-green" />
    <text x="490" y="375" class="label">Ranking y Relevancia</text>

    <rect x="400" y="450" width="180" height="50" rx="5" class="box-green" />
    <text x="490" y="475" class="label">Resultados</text>

    <rect x="400" y="550" width="200" height="50" rx="5" class="box-green" />
    <text x="500" y="575" class="label">Procesamiento de Consulta</text>
  </g>

  <g>
    <path d="M 200,125 H 240" class="edge" />
    <path d="M 400,125 H 440" class="edge" />
    <path d="M 580,125 H 620" class="edge" />

    <path d="M 690,150 V 275 H 580" class="edge" />

    <path d="M 120,400 V 480" class="edge" />
    <rect x="110" y="430" width="50" height="20" fill="#f0f2f5" />
    <text x="135" y="445" class="label-small">Realiza</text>

    <path d="M 180,400 V 480" class="edge" />
    <rect x="170" y="430" width="30" height="20" fill="#f0f2f5" />
    <text x="185" y="445" class="label-small">Da</text>

    <path d="M 90,530 V 565 H 400" class="edge-dashed" />
    <path d="M 230,530 V 585 H 400" class="edge-dashed" />

    <path d="M 600,575 H 750 V 275 H 580" class="edge" />

    <path d="M 490,300 V 350" class="edge-dashed" />
    <path d="M 490,400 V 450" class="edge" />

    <path d="M 400,475 H 250 V 375 H 220" class="edge" />
    <rect x="280" y="465" width="70" height="20" fill="#f0f2f5" />
    <text x="315" y="480" class="label-small">Muestra a</text>
  </g>

</svg>